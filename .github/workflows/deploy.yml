name: Deploy

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Debug DEPLOY_KEY
      run: |
        echo "Checking if DEPLOY_KEY is set"
        if [ -z "${{ secrets.DEPLOY_KEY }}" ]; then
          echo "DEPLOY_KEY is not set"
        else
          echo "DEPLOY_KEY is set"
        fi

    - name: Setup SSH key for GitHub
      run: |
        mkdir -p ~/.ssh
        echo "${{ secrets.DEPLOY_KEY }}" > ~/.ssh/deploy-key
        chmod 600 ~/.ssh/deploy-key
        ssh-keyscan github.com >> ~/.ssh/known_hosts
    
    - name: Deploy your code
      run: |
        echo "test"
        # Langkah deployment lainnyaa
